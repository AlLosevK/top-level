<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.14/js/utils.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.14/css/intlTelInput.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.14/js/intlTelInput.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.js"></script>

</head>
<body>
  <form class="form" method="post" action="test.php">
    <input type="tel" name ="phone" id="phone1">
    <input type="tel" class="hide" name="hided_phone" id="hiden">
    <input type="text" name="name" placeholder="Name">
    <button class="click" type="submit">Отправить</button>
  </form>

  <script>
    $('form').on('submit', function () {
        var code = $("#phone1").intlTelInput("getSelectedCountryData").dialCode;
        var phoneNumber = $('#phone1').val();
        var fullPhone = code + phoneNumber;
        $("#hiden").val(fullPhone);
        alert($(this).serialize());
    });
    /* INITIALIZE BOTH INPUTS WITH THE intlTelInput FEATURE*/

    var phone_number = $("#phone1").intlTelInput({
      initialCountry: "us",
      separateDialCode: true,
      preferredCountries: ["fr", "us", "gb"],
      geoIpLookup: function (callback) {
          $.get('https://ipinfo.io', function () {
          }, "jsonp").always(function (resp) {
              var countryCode = (resp && resp.country) ? resp.country : "";
              callback(countryCode);
          });
      },
      utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.14/js/utils.js"
    });


    $("#hiden").intlTelInput({
      initialCountry: "us",
      dropdownContainer: 'body',
      utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/11.0.14/js/utils.js"
    });



    /* ADD A MASK IN PHONE1 INPUT (when document ready and when changing flag) FOR A BETTER USER EXPERIENCE */

    var mask1 = $("#phone1").attr('placeholder').replace(/[0-9]/g, 0);

    $(document).ready(function () {
      $('#phone1').mask(mask1)
    });

    $("#phone1").on("countrychange", function (e, countryData) {
      $("#phone1").val('');
      var mask1 = $("#phone1").attr('placeholder').replace(/[0-9]/g, 0);
      $('#phone1').mask(mask1);
    });


    /*ON SUBMIT...*/

    function submitForm(oFormElement) {


      document.getElementById("hiden").value = $("#phone1").val().replace(/\s+/g, ''); // REMOVE ALL THE SPACES OF PHONE1 VALUE
                                                                                       // PUT THE RESULT IN HIDEN INPUT
                                                                                       // AND TEST THIS LATTER TO SEE IF IT FITS WITH
                                                                                       // the intlTelInput NUMBER FORMAT

      //alert($("#hiden").val());


      // AND IT WILL DISPLAY OK
      if ($("#hiden").intlTelInput("isValidNumber") == true) {
          alert("OK");
          return true;
      }
      else {
          alert("NOT OK");
          return false;
      }

    }

    $('input.hide').parent().hide();
  </script>
</body>
</html>
